# Internationalization (i18n)

This project uses [next-intl](https://next-intl-docs.vercel.app/) for internationalization support.

## Supported Languages

- English (en) - Default
- Spanish (es)
- French (fr)

## Structure

- `/locales/` - Contains translation files for each language
  - `en.json` - English translations
  - `es.json` - Spanish translations
  - `fr.json` - French translations
- `/i18n.ts` - Configuration file for next-intl
- `/lib/locale.ts` - Utility functions for managing user locale preferences
- `/components/language-selector.tsx` - Language selector component

## Usage

### In Server Components

```tsx
import { useTranslations } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations('namespace');
  
  return <h1>{t('title')}</h1>;
}
```

### In Client Components

```tsx
'use client';

import { useTranslations } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations('namespace');
  
  return <button>{t('common.cancel')}</button>;
}
```

### With Variables

```tsx
const t = useTranslations('createProjectDialog');

// Translation with variables
t('projectImportSuccessWithFiles', { texFiles: 5, otherFiles: 3 });
```

## Adding a New Language

1. Create a new translation file in `/locales/` (e.g., `de.json` for German)
2. Copy the structure from `en.json` and translate all strings
3. Add the language to the `languages` array in `/components/language-selector.tsx`:

```tsx
const languages = [
  { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },
  { code: 'es', name: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' },
  { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
  { code: 'de', name: 'Deutsch', flag: 'ðŸ‡©ðŸ‡ª' }, // Add new language
];
```

## Adding New Translations

1. Add the key-value pair to `en.json` first
2. Add the corresponding translations to all other language files
3. Use the translation in your component:

```tsx
const t = useTranslations('namespace');
<div>{t('newKey')}</div>
```

## Translation File Structure

Translation files are organized by namespace:

```json
{
  "common": {
    "cancel": "Cancel",
    "create": "Create",
    ...
  },
  "projects": {
    "title": "Projects",
    ...
  },
  "createProjectDialog": {
    "title": "New Project",
    ...
  }
}
```

## Testing

Run the i18n tests to ensure all translation files have matching keys:

```bash
npm test -- @__tests__/unit/i18n.test.ts
```

## Language Persistence

The user's language preference is stored in a cookie (`NEXT_LOCALE`) and persists across sessions.
